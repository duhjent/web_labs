<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/main.css">
    <title>Log In</title>
</head>

<body class="text-center d-flex align-items-center h-100">
    <button class="btn btn-secondary position-absolute go-back" onclick="history.back()">&larr; Go back</button>
    <main class="form-login w-100 m-auto">
        <form id="login-form">
            <h1 class="h3 mb-3 fw-normal">Please Log In</h1>
            <label for="username" class="visually-hidden">Username</label>
            <input type="text" class="form-control mb-n1" id="username" placeholder="Username">
            <label for="password" class="visually-hidden">Password</label>
            <input type="password" class="form-control mb-2" id="password" placeholder="Password">
            <div class="invalid-feedback mb-1 d-none" id="invalid-credentials">
                Ivalid credentials.
            </div>
            <button class="btn btn-primary btn-lg w-100">Log In</button>
        </form>
        <a class="btn btn-secondary btn-lg w-100 mt-3" href="register.html">Register</a>
    </main>
    <script type="module">
        import { authService } from './js/auth-service.js';
        const loginForm = document.querySelector('#login-form');
        loginForm.addEventListener('submit', evt => {
            evt.preventDefault();
            try {
                authService.authenticate(loginForm.elements['username'].value, loginForm.elements['password'].value);
            } catch {
                document.querySelector('#invalid-credentials').style.display = 'block';
            }
            window.location.replace('home.html');
        })
    </script>
</body>

</html>